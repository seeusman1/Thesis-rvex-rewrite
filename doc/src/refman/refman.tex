%& -shell-escape
\documentclass[11pt,twoside]{ce}
\nonstopmode
\usepackage{geometry} \geometry{a4paper}
\usepackage[T1]{fontenc}
\usepackage[scaled=0.85]{beramono}
\usepackage{graphicx}
\usepackage{float}
\usepackage{wrapfig}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{tabularx}
\usepackage{longtable}
\usepackage{color}
\usepackage{tikz}
\usepackage{tabto}
\usepackage[hidelinks]{hyperref}
\usepackage{listings}
\usepackage{import}
\usepackage{todonotes}
\usepackage{amssymb}
\usepackage{pifont}

%===============================================================================
% Hyperref stuff
%===============================================================================

% Also list subsubsections in the PDF contents.
\hypersetup{bookmarksdepth=4}


%===============================================================================
% Code listings
%===============================================================================

\input{generated/vexasm.generated}
\lstdefinelanguage{nothing}{sensitive=false}

\lstset{language=VHDL}
\definecolor{codeBackgroundColor}{rgb}{0.97,0.98,0.99}
\definecolor{codeBorderColor}    {rgb}{0.90,0.933,0.966}
\definecolor{codeCommentColor}   {rgb}{0.0,0.6,0.0}
\definecolor{codeNumberColor}    {rgb}{0.75,0.8,0.85}
\definecolor{codeKeywordColor}   {rgb}{0.0,0.0,1.0}
\definecolor{codeStringColor}    {rgb}{0.5,0.5,0.5}
\definecolor{codeInlineColor}    {rgb}{0.2,0.2,0.2}
\lstset{ %
  basicstyle=\scriptsize\ttfamily,
  frame=single,
  rulecolor=\color{codeBorderColor},
  backgroundcolor=\color{codeBackgroundColor},
  commentstyle=\color{codeCommentColor},
  keywordstyle=\color{codeKeywordColor},
  numberstyle=\color{codeNumberColor},
  stringstyle=\color{codeStringColor},
  numbers=left,
  numbersep=5pt,
  stepnumber=1,
  tabsize=2
}


%===============================================================================
% Custom LaTeX commands
%===============================================================================

% rho-VEX style command.
\newcommand{\rvex}{\texorpdfstring{$\rho$}{r}-VEX}

% Inline code command.
\newcommand{\codenodetok}[1]{{\color{codeInlineColor}\small{\texttt{#1}}}}
\newcommand{\code}[1]{\codenodetok{\detokenize{#1}}}

% Code headers.
\newcommand{\codehead}[1]{\noindent\textbf{\footnotesize\texttt{\detokenize{#1}}}}

% Hyperlink commands to the documentation of basic core features.
\newcommand{\creg}[1]{\hyperref[reg:#1]{\code{CR_#1}}}
\newcommand{\insn}[1]{\hyperref[opc:#1]{\code{#1}}}
\newcommand{\trap}[1]{\hyperref[trap:#1]{\code{TRAP_#1}}}
\newcommand{\rvexent}[1]{\hyperref[ent:#1]{\code{#1}}}

% Magic command which allows lengths to be divided. Thanks, stackoverflow!
\makeatletter
\newcommand*{\DivideLengths}[2]{%
  \strip@pt\dimexpr\number\numexpr\number\dimexpr#1\relax*65536/\number\dimexpr#2\relax\relax sp\relax
}
\makeatother


%===============================================================================
\begin{document}
%===============================================================================


%-------------------------------------------------------------------------------
% Title page
%-------------------------------------------------------------------------------

\begin{titlepage}
\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}
\center

\vspace*{5cm}
\HRule \\[0.4cm]
{ \huge \bfseries \rvex{} reference manual}\\[0.2cm]
\HRule \\[0.5cm]
\vskip 1em
Computer Engineering Laboratory, TU Delft \\[0.4cm]
\today
\vfill
\end{titlepage}
\pagenumbering{arabic}
\setcounter{page}{1}

%-------------------------------------------------------------------------------
% Table of contents
%-------------------------------------------------------------------------------

\tableofcontents


%-------------------------------------------------------------------------------
% Todo list
%-------------------------------------------------------------------------------

\chapter*{Todo list}
\addcontentsline{toc}{chapter}{Todo list}

This chapter lists `todos' for both this reference manual. This includes notes
indicating that the current implementation differs from what is described in the
manual.

\vskip 20 pt

\makeatletter
\@starttoc{tdo}
\makeatother


%-------------------------------------------------------------------------------
% Content
%-------------------------------------------------------------------------------

\subimport{1-introduction/}{introduction.tex}
\subimport{2-core-ug/}{core-ug.tex}
\subimport{3-core-int/}{core-int.tex}
\subimport{4-cache/}{cache.tex}
\subimport{5-bus/}{bus.tex}
\subimport{6-debug/}{debug.tex}
\subimport{7-platforms/}{platforms.tex}
\subimport{8-host/}{host.tex}
\subimport{9-target/}{target.tex}


%-------------------------------------------------------------------------------
% Bibliography
%-------------------------------------------------------------------------------

\bibliographystyle{ieeetr}
\bibliography{bib}
\addcontentsline{toc}{chapter}{Bibliography}

%===============================================================================
\end{document}
%===============================================================================
