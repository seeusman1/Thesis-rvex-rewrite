-- Ensures that the STW and STOP syllables function.
name    Test STW and STOP instructions.

-- Check configuration.
cfg     genBundleSize       8
cfg     memLaneRevIndex     1
cfg     branchLaneRevIndex  0

-- Initialize memories.
init    imem 64 dmem 64

-- 0x00
load    nop
load    nop ;;
load    nop
load    nop
load    nop
load    nop
load    nop
load    nop

-- 0x20
load    nop
load    nop
load    nop
load    nop
load    nop
load    nop
load    stw 8[r0.0] = r0.0
load    nop ;;

-- 0x40
load    nop
load    nop
load    nop
load    nop
load    nop
load    nop
load    nop
load    stop ;;

-- Start the test.
reset
wait    20 memw 8 0 or fail
wait    20
rctrl   0 chk done
rctrl   0 chk idle
read    dbg word 